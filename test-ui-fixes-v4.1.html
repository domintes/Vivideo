<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🔧 Vivideo v4.1 - UI Fixes Test</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background: #0a0a0a;
            color: #00ff00;
            line-height: 1.6;
            min-height: 200vh; /* Make page tall for scroll test */
        }
        .test-section {
            background: #111;
            border: 1px solid #333;
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
        }
        .success { color: #44ff44; }
        .info { color: #4488ff; }
        .test-button {
            background: #333;
            color: #fff;
            border: 1px solid #555;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            border-radius: 4px;
        }
        .test-button:hover {
            background: #444;
        }
        video {
            width: 300px;
            height: 200px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 8px;
            margin: 10px;
        }
        .test-content {
            padding: 20px;
            margin: 20px 0;
            background: #222;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>🔧 Vivideo v4.1 - UI Fixes Test</h1>
    
    <div class="test-section">
        <h2>✨ Co naprawiono w v4.1:</h2>
        <ul class="success">
            <li>✅ <strong>Toggle Collapse/Expand</strong> - Panele Themes/Profiles poprawnie się zwijają/rozwijają</li>
            <li>✅ <strong>Scrollable Container</strong> - Dodano overflow-y: auto i max-height: calc(100vh - 40px)</li>
            <li>✅ <strong>Custom Scrollbar</strong> - Ładny scrollbar dopasowany do motywów</li>
            <li>✅ <strong>Smooth Scrolling</strong> - Płynne przewijanie</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🎮 Instrukcje testowe:</h2>
        <ol class="info">
            <li><strong>Otwórz Vivideo</strong> - Naciśnij Alt+V</li>
            <li><strong>Test Toggle Panels</strong>:
                <ul>
                    <li>Kliknij "Themes" → panel się rozwija</li>
                    <li>Kliknij "Themes" ponownie → panel się zwija ✅</li>
                    <li>Kliknij "Profiles" → panel się rozwija</li>
                    <li>Kliknij "Profiles" ponownie → panel się zwija ✅</li>
                    <li>Kliknij "ⓘ" → info panel rozwija/zwija ✅</li>
                </ul>
            </li>
            <li><strong>Test Scrolling</strong>:
                <ul>
                    <li>Otwórz wszystkie panele (Themes, Profiles, Info)</li>
                    <li>Panel powinien być scrollable jeśli content jest za długi</li>
                    <li>Scrollbar powinien być widoczny i ładnie stylizowany</li>
                    <li>Max-height = wysokość ekranu minus margines</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="test-section">
        <h2>🎯 Testy manualne:</h2>
        <button class="test-button" onclick="testToggle()">Test Alt+V Toggle</button>
        <button class="test-button" onclick="testPanels()">Test Panel Toggling</button>
        <button class="test-button" onclick="testScrollHeight()">Test Max Height</button>
    </div>

    <div class="test-section">
        <h2>📺 Test Video:</h2>
        <video controls loop>
            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
            Test video for filters
        </video>
    </div>

    <div class="test-content">
        <h3>🌟 Test Content Sections</h3>
        <p>Ten długi content sprawdza czy scrolling działa poprawnie w panelu Vivideo.</p>
        
        <h4>Test Profiles:</h4>
        <p>1. Zapisz kilka profili z różnymi ustawieniami</p>
        <p>2. Sprawdź czy lista profili jest scrollable</p>
        <p>3. Testuj ładowanie/usuwanie profili</p>
        
        <h4>Test Themes:</h4>
        <p>1. Przełącz między Cybernetic a Casual</p>
        <p>2. Testuj HSL color picker dla font/background</p>
        <p>3. Sprawdź czy theme panel się poprawnie zwija</p>
        
        <h4>Test Info Panel:</h4>
        <p>1. Otwórz panel informacji (ⓘ)</p>
        <p>2. Sprawdź czy content jest scrollable</p>
        <p>3. Kliknij ponownie żeby zamknąć</p>
    </div>

    <div class="test-content">
        <h3>📏 Responsive Design Test</h3>
        <p>Zmień rozmiar okna przeglądarki i sprawdź:</p>
        <ul>
            <li>Panel nie wychodzi poza ekran (max-height)</li>
            <li>Scrollbar pojawia się gdy potrzebny</li>
            <li>Smooth scrolling działa</li>
            <li>Panel można przeciągać (drag header)</li>
        </ul>
    </div>

    <div class="test-content">
        <h3>🎨 Scrollbar Theme Test</h3>
        <p>Sprawdź różne motywy:</p>
        <ul>
            <li><strong>Cybernetic</strong> - zielony scrollbar (rgba(0, 255, 170, 0.4))</li>
            <li><strong>Casual</strong> - niebieski scrollbar (rgba(69, 160, 255, 0.4))</li>
            <li>Hover effect na scrollbar</li>
        </ul>
    </div>

    <!-- Extra content to make page very long -->
    <div class="test-content">
        <h3>🔄 More Test Content</h3>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores, quibusdam!</p>
        <p>Więcej treści dla testów scrollowania...</p>
        <p>Test 1 - długa linia tekstu do sprawdzenia czy horizontal scrolling jest ukryty</p>
        <p>Test 2 - kolejna długa linia żeby sprawdzić responsive design panelu Vivideo</p>
        <p>Test 3 - sprawdzenie czy panel nie koliduje z contentem strony</p>
    </div>

    <div class="test-content">
        <h3>📱 Mobile-friendly Test</h3>
        <p>Symuluj mobile viewport i sprawdź:</p>
        <ul>
            <li>Panel się mieści na ekranie</li>
            <li>Scrolling działa na dotyk</li>
            <li>Przyciski są klikalne</li>
        </ul>
    </div>

    <script>
        function testToggle() {
            console.log('🎹 Testing Alt+V...');
            const event = new KeyboardEvent('keydown', {
                key: 'v',
                altKey: true,
                bubbles: true
            });
            document.dispatchEvent(event);
        }

        function testPanels() {
            console.log('🔧 Testing panel toggling...');
            if (window.vivideoController && window.vivideoController.isVisible) {
                console.log('Testing themes toggle...');
                window.vivideoController.toggleThemes();
                
                setTimeout(() => {
                    console.log('Testing themes toggle again (should close)...');
                    window.vivideoController.toggleThemes();
                }, 1000);
                
                setTimeout(() => {
                    console.log('Testing profiles toggle...');
                    window.vivideoController.toggleProfiles();
                }, 2000);
                
                setTimeout(() => {
                    console.log('Testing profiles toggle again (should close)...');
                    window.vivideoController.toggleProfiles();
                }, 3000);
            } else {
                console.error('Vivideo not visible or not found');
            }
        }

        function testScrollHeight() {
            console.log('📏 Testing max height...');
            if (window.vivideoController && window.vivideoController.container) {
                const container = window.vivideoController.container;
                const rect = container.getBoundingClientRect();
                const windowHeight = window.innerHeight;
                
                console.log('Container height:', rect.height);
                console.log('Window height:', windowHeight);
                console.log('Max allowed height:', windowHeight - 40);
                console.log('Is within limits:', rect.height <= windowHeight - 40);
                
                if (rect.height > windowHeight - 40) {
                    console.warn('⚠️ Container exceeds max height!');
                } else {
                    console.log('✅ Container height is within limits');
                }
            }
        }

        // Monitor window resize
        window.addEventListener('resize', () => {
            console.log('📐 Window resized, testing height limits...');
            setTimeout(testScrollHeight, 100);
        });

        console.log('🎬 Vivideo v4.1 UI Fixes Test Page loaded');
        console.log('📋 Test toggle panels and scrolling functionality');
    </script>
</body>
</html>
